<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Inventario</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Librer√≠as para exportar -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <!-- Pantalla de Login -->
    <div id="loginScreen" class="login-screen">

        <!-- Carrusel izquierdo -->
        <div class="login-carousel">
            <div class="carousel-track">
                <div class="carousel-slide active">
                    <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&q=80" alt="Frutas y verduras frescas">
                    <div class="carousel-caption">
                        <span class="carousel-icon">ü•¶</span>
                        <h2>Frutas & Verduras</h2>
                        <p>Controla tu inventario de productos frescos</p>
                    </div>
                </div>
                <div class="carousel-slide">
                    <img src="https://images.unsplash.com/photo-1498654896293-37aacf113fd9?w=800&q=80" alt="Granos y cereales">
                    <div class="carousel-caption">
                        <span class="carousel-icon">üåæ</span>
                        <h2>Granos & Cereales</h2>
                        <p>Arroz, frijoles, lentejas y m√°s</p>
                    </div>
                </div>
                <div class="carousel-slide">
                    <img src="https://images.unsplash.com/photo-1563636619-e9143da7973b?w=800&q=80" alt="L√°cteos">
                    <div class="carousel-caption">
                        <span class="carousel-icon">ü•õ</span>
                        <h2>L√°cteos</h2>
                        <p>Leche, quesos, yogures y derivados</p>
                    </div>
                </div>
                <div class="carousel-slide">
                    <img src="https://images.unsplash.com/photo-1607349913338-fca6f7fc42d0?w=800&q=80" alt="Carnes y prote√≠nas">
                    <div class="carousel-caption">
                        <span class="carousel-icon">ü•©</span>
                        <h2>Carnes & Prote√≠nas</h2>
                        <p>Gestiona tu stock de prote√≠nas f√°cilmente</p>
                    </div>
                </div>
                <div class="carousel-slide">
                    <img src="https://images.unsplash.com/photo-1574484284002-952d92456975?w=800&q=80" alt="Aceites y enlatados">
                    <div class="carousel-caption">
                        <span class="carousel-icon">üõí</span>
                        <h2>Canasta Familiar</h2>
                        <p>Todo tu mercado en un solo sistema</p>
                    </div>
                </div>
            </div>

            <!-- Indicadores -->
            <div class="carousel-dots">
                <span class="dot active" onclick="irASlide(0)"></span>
                <span class="dot" onclick="irASlide(1)"></span>
                <span class="dot" onclick="irASlide(2)"></span>
                <span class="dot" onclick="irASlide(3)"></span>
                <span class="dot" onclick="irASlide(4)"></span>
            </div>

            <!-- Flechas -->
            <button class="carousel-arrow left" onclick="moverCarrusel(-1)">&#8249;</button>
            <button class="carousel-arrow right" onclick="moverCarrusel(1)">&#8250;</button>

            <!-- Overlay con branding -->
            <div class="carousel-brand">
                <span>üõçÔ∏è Sistema de Inventario</span>
            </div>
        </div>

        <!-- Formulario derecho -->
        <div class="login-container">
            <h1>Bienvenido</h1>
            <p class="login-subtitle">Ingresa tus credenciales para continuar</p>
            <form id="formLogin">
                <input type="text" id="usuario" placeholder="Usuario" required>
                <input type="password" id="password" placeholder="Contrase√±a" required>
                <button type="submit">Iniciar Sesi√≥n</button>
            </form>
            <p class="login-hint">Usuario por defecto: admin | Contrase√±a: admin</p>
        </div>
    </div>

    <!-- Sistema Principal -->
    <div class="container" id="mainSystem" style="display: none;">
        <header>
            <h1>Sistema de Inventario</h1>
            <div class="user-info">
                <span id="nombreUsuario" class="user-name"></span>
                <span id="rolUsuario" class="user-role"></span>
                <button id="btnCerrarSesion" class="btn-logout">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <nav class="tabs">
            <button class="tab-btn active" data-tab="ingresar">Ingresar Productos</button>
            <button class="tab-btn" data-tab="visualizar">Visualizar Productos</button>
            <button class="tab-btn" data-tab="seleccionar">Seleccionar Productos</button>
            <button class="tab-btn" id="tabUsuarios" data-tab="usuarios" style="display: none;">Gesti√≥n de Usuarios</button>
        </nav>

        <!-- M√≥dulo 1: Ingresar Productos -->
        <section id="ingresar" class="tab-content active">
            <h2>Ingresar Productos</h2>
            
            <div class="input-mode">
                <button id="modoIndividual" class="mode-btn active">Individual</button>
                <button id="modoMasivo" class="mode-btn">Masivo</button>
            </div>

            <!-- Ingreso Individual -->
            <div id="formularioIndividual" class="form-container">
                <form id="formProducto">
                    <input type="text" id="nombre" placeholder="Nombre del producto" required>
                    <input type="number" id="cantidad" placeholder="Cantidad" required min="1">
                    <input type="number" id="precio" placeholder="Precio" required min="0" step="0.01">
                    <input type="text" id="categoria" placeholder="Categor√≠a">
                    <button type="submit">Agregar Producto</button>
                </form>
            </div>

            <!-- Ingreso Masivo -->
            <div id="formularioMasivo" class="form-container" style="display: none;">
                <div class="upload-section">
                    <h3>Opci√≥n 1: Cargar desde archivo</h3>
                    <input type="file" id="archivoProductos" accept=".csv,.txt" class="file-input">
                    <button type="button" id="btnCargarArchivo" class="btn-cargar">Cargar Archivo CSV/TXT</button>
                    <p class="file-hint">Formato: nombre,cantidad,precio,categor√≠a (una l√≠nea por producto)</p>
                </div>
                
                <div class="divider">O</div>
                
                <div class="manual-section">
                    <h3>Opci√≥n 2: Ingresar manualmente</h3>
                    <p>Ingresa productos en formato: nombre,cantidad,precio,categor√≠a (uno por l√≠nea)</p>
                    <textarea id="productosMasivos" rows="10" placeholder="Ejemplo:&#10;Laptop,5,1200.50,Electr√≥nica&#10;Mouse,20,15.99,Accesorios"></textarea>
                    <button id="btnAgregarMasivo">Agregar Productos Masivos</button>
                </div>
            </div>
        </section>

        <!-- M√≥dulo 2: Visualizar Productos -->
        <section id="visualizar" class="tab-content">
            <h2>Visualizar Productos</h2>
            <div class="search-bar">
                <input type="text" id="buscar" placeholder="Buscar productos...">
            </div>
            <div id="listaProductos" class="productos-grid"></div>
        </section>

        <!-- M√≥dulo 3: Seleccionar Productos -->
        <section id="seleccionar" class="tab-content">
            <h2>Seleccionar Productos</h2>
            <div id="productosSeleccion" class="productos-seleccion"></div>
            <div class="seleccion-acciones">
                <button id="btnVenderProductos" class="btn-vender">üí∞ Vender Productos</button>
                <button id="btnLimpiarSeleccion">üóëÔ∏è Limpiar Selecci√≥n</button>
            </div>
            <div id="resumenSeleccion"></div>
        </section>

        <!-- M√≥dulo 4: Gesti√≥n de Usuarios (Solo Admin) -->
        <section id="usuarios" class="tab-content">
            <h2>Gesti√≥n de Usuarios</h2>
            
            <div class="usuarios-header">
                <button id="btnNuevoUsuario" class="btn-nuevo-usuario">‚ûï Nuevo Usuario</button>
            </div>

            <div id="listaUsuarios" class="usuarios-grid"></div>
        </section>
    </div>

    <!-- Notificaciones -->
    <div id="notificacion" class="notificacion">
        <span class="notificacion-icono"></span>
        <span class="notificacion-mensaje"></span>
    </div>

    <!-- Modal para editar producto -->
    <div id="modalEditar" class="modal">
        <div class="modal-content">
            <h2>Editar Producto</h2>
            <form id="formEditar">
                <input type="hidden" id="editarId">
                <input type="text" id="editarNombre" placeholder="Nombre del producto" required>
                <input type="number" id="editarCantidad" placeholder="Cantidad" required min="1">
                <input type="number" id="editarPrecio" placeholder="Precio" required min="0" step="0.01">
                <input type="text" id="editarCategoria" placeholder="Categor√≠a">
                <div class="modal-acciones">
                    <button type="submit" class="btn-guardar">Guardar Cambios</button>
                    <button type="button" class="btn-cancelar" onclick="cerrarModal()">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para seleccionar formato de exportaci√≥n -->
    <div id="modalExportar" class="modal">
        <div class="modal-content modal-exportar">
            <h2>¬øC√≥mo deseas exportar la factura?</h2>
            <p class="modal-subtitle">Selecciona el formato de exportaci√≥n para la venta</p>
            <div class="export-buttons">
                <button id="btnConfirmarExcel" class="btn-export-option btn-excel">
                    <span class="icon">üìä</span>
                    <span class="text">Exportar a CSV</span>
                    <span class="desc">Archivo .csv simple</span>
                </button>
                <button id="btnConfirmarPDF" class="btn-export-option btn-pdf">
                    <span class="icon">üìÑ</span>
                    <span class="text">Exportar a PDF</span>
                    <span class="desc">Documento imprimible</span>
                </button>
            </div>
            <button class="btn-cancelar-modal" onclick="cerrarModalExportar()">Cancelar</button>
        </div>
    </div>

    <!-- Modal para crear/editar usuario -->
    <div id="modalUsuario" class="modal">
        <div class="modal-content">
            <h2 id="tituloModalUsuario">Nuevo Usuario</h2>
            <form id="formUsuario">
                <input type="hidden" id="usuarioId">
                <input type="text" id="usuarioNombre" placeholder="Nombre completo" required>
                <input type="text" id="usuarioUsername" placeholder="Nombre de usuario" required>
                <input type="password" id="usuarioPassword" placeholder="Contrase√±a" required>
                <select id="usuarioRol" required>
                    <option value="">Seleccionar rol</option>
                    <option value="admin">Administrador</option>
                    <option value="usuario">Usuario</option>
                </select>
                <div class="modal-acciones">
                    <button type="submit" class="btn-guardar">Guardar Usuario</button>
                    <button type="button" class="btn-cancelar" onclick="cerrarModalUsuario()">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>

    <!-- Script del carrusel -->
    <script>
        let slideActual = 0;
        const slides = document.querySelectorAll('.carousel-slide');
        const dots = document.querySelectorAll('.dot');
        let intervalo = null;

        function mostrarSlide(index) {
            slides.forEach(s => s.classList.remove('active'));
            dots.forEach(d => d.classList.remove('active'));
            slideActual = (index + slides.length) % slides.length;
            slides[slideActual].classList.add('active');
            dots[slideActual].classList.add('active');
        }

        function moverCarrusel(direccion) {
            mostrarSlide(slideActual + direccion);
            reiniciarIntervalo();
        }

        function irASlide(index) {
            mostrarSlide(index);
            reiniciarIntervalo();
        }

        function reiniciarIntervalo() {
            clearInterval(intervalo);
            intervalo = setInterval(() => mostrarSlide(slideActual + 1), 4000);
        }

        intervalo = setInterval(() => mostrarSlide(slideActual + 1), 4000);
    </script>
</body>
</html>