<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InventoryPro</title>

    <!-- CSS modular -->
    <link rel="stylesheet" href="../CSS/login.css">
    <link rel="stylesheet" href="../CSS/carousel.css">
    <link rel="stylesheet" href="../CSS/main.css">
    <link rel="stylesheet" href="../CSS/modals.css">

    <!-- Librer√≠as externas con defer -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" defer></script>
</head>
<body>

<!-- Pantalla de Login -->
<div id="loginScreen" class="login-screen">

    <!-- Espacio izquierdo 5% -->
    <div class="spacer-left"></div>

    <!-- Carrusel 60% -->
    <div class="login-carousel">
        <div class="carousel-track">
            <!-- Slides -->
            <div class="carousel-slide active">
                <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?w=800&q=80" alt="Frutas y verduras frescas">
                <div class="carousel-caption">
                    <span class="carousel-icon">ü•¶</span>
                    <h2>Frutas & Verduras</h2>
                    <p>Controla tu inventario de productos frescos</p>
                </div>
            </div>
            <div class="carousel-slide">
                <img src="https://images.unsplash.com/photo-1498654896293-37aacf113fd9?w=800&q=80" alt="Granos y cereales">
                <div class="carousel-caption">
                    <span class="carousel-icon">üåæ</span>
                    <h2>Granos & Cereales</h2>
                    <p>Arroz, frijoles, lentejas y m√°s</p>
                </div>
            </div>
            <div class="carousel-slide">
                <img src="https://images.unsplash.com/photo-1563636619-e9143da7973b?w=800&q=80" alt="L√°cteos">
                <div class="carousel-caption">
                    <span class="carousel-icon">ü•õ</span>
                    <h2>L√°cteos</h2>
                    <p>Leche, quesos, yogures y derivados</p>
                </div>
            </div>
            <div class="carousel-slide">
                <img src="https://images.unsplash.com/photo-1607349913338-fca6f7fc42d0?w=800&q=80" alt="Carnes y prote√≠nas">
                <div class="carousel-caption">
                    <span class="carousel-icon">ü•©</span>
                    <h2>Carnes & Prote√≠nas</h2>
                    <p>Gestiona tu stock de prote√≠nas f√°cilmente</p>
                </div>
            </div>
            <div class="carousel-slide">
                <img src="https://images.unsplash.com/photo-1574484284002-952d92456975?w=800&q=80" alt="Aceites y enlatados">
                <div class="carousel-caption">
                    <span class="carousel-icon">üõí</span>
                    <h2>Canasta Familiar</h2>
                    <p>Todo tu mercado en un solo sistema</p>
                </div>
            </div>
        </div>

       <!-- Indicadores del carrusel -->
        <div class="carousel-dots">
            <span class="dot active" onclick="irASlide(0)"></span>
            <span class="dot" onclick="irASlide(1)"></span>
            <span class="dot" onclick="irASlide(2)"></span>
            <span class="dot" onclick="irASlide(3)"></span>
            <span class="dot" onclick="irASlide(4)"></span>
        </div>

        <!-- Flechas del carrusel -->
        <button class="carousel-arrow left" onclick="moverCarrusel(-1)">
            <span class="arrow-icon">&#8249;</span>
        </button>
        <button class="carousel-arrow right" onclick="moverCarrusel(1)">
            <span class="arrow-icon">&#8250;</span>
        </button>

        <!-- Branding del carrusel -->
        <div class="carousel-brand">
            <span>üõçÔ∏è InventoryPro</span>
        </div>
    </div>

    <!-- Formulario login 30% -->
    <div class="login-container">
        <h1 id="login-title">¬°Bienvenido de nuevo!</h1> <!-- saludo cordial -->
        <p class="login-subtitle">Ingresa tus credenciales para continuar</p>

        <form id="formLogin">
            <input type="text" id="usuario" class="input-field" placeholder="Usuario" required>
            <input type="password" id="password" class="input-field" placeholder="Contrase√±a" required>

            <!-- Opciones login -->
            <div class="login-options">
               <a href="#" class="forgot-password">¬øOlvidaste tu contrase√±a?</a>
            </div>

            <button type="submit" class="btn-submit">Iniciar Sesi√≥n</button>
        </form>

        <!-- Mensaje de error / aviso -->
        <p id="login-error" class="login-error" style="display:none;">Usuario o contrase√±a incorrectos</p>

        <!-- Informaci√≥n adicional -->
        <p class="login-register">¬øNo tienes cuenta? <a href="#">Reg√≠strate aqu√≠</a></p>
    </div>

</div>

<!-- Sistema principal -->
<div class="container" id="mainSystem" style="display: none;">
    <header>
        <h1>InventoryPro</h1>
        <div class="user-info">
            <span id="nombreUsuario" class="user-name"></span>
            <span id="rolUsuario" class="user-role"></span>
            <button id="btnCerrarSesion" class="btn-logout">Cerrar Sesi√≥n</button>
        </div>
    </header>

    <nav class="tabs">
        <button class="tab-btn active" data-tab="ingresar">Ingresar Productos</button>
        <button class="tab-btn" data-tab="visualizar">Visualizar Productos</button>
        <button class="tab-btn" data-tab="seleccionar">Seleccionar Productos</button>
        <button class="tab-btn" id="tabUsuarios" data-tab="usuarios" style="display: none;">Gesti√≥n de Usuarios</button>
    </nav>

    <section id="ingresar" class="tab-content active"></section>
    <section id="visualizar" class="tab-content"></section>
    <section id="seleccionar" class="tab-content"></section>
    <section id="usuarios" class="tab-content"></section>
</div>

<!-- Modals -->
<div id="modalEditar" class="modal"></div>
<div id="modalExportar" class="modal"></div>
<div id="modalUsuario" class="modal"></div>

<!-- Notificaciones -->
<div id="notificacion" class="notificacion"></div>

<!-- Scripts propios -->
<script src="../JS/carrusel.js" defer></script>
<script src="../JS/login.js" defer></script>
<script src="../JS/productos.js" defer></script>
<script src="../JS/usuarios.js" defer></script>

<!-- Script Carrusel inline inicial -->
<script defer>
    let slideActual = 0;
    const slides = document.querySelectorAll('.carousel-slide');
    const dots = document.querySelectorAll('.dot');
    let intervalo = setInterval(() => mostrarSlide(slideActual + 1), 4000);

    function mostrarSlide(index) {
        slides.forEach(s => s.classList.remove('active'));
        dots.forEach(d => d.classList.remove('active'));
        slideActual = (index + slides.length) % slides.length;
        slides[slideActual].classList.add('active');
        dots[slideActual].classList.add('active');
    }

    function moverCarrusel(direccion) {
        mostrarSlide(slideActual + direccion);
        reiniciarIntervalo();
    }

    function irASlide(index) {
        mostrarSlide(index);
        reiniciarIntervalo();
    }

    function reiniciarIntervalo() {
        clearInterval(intervalo);
        intervalo = setInterval(() => mostrarSlide(slideActual + 1), 4000);
    }
</script>

<script>
    const loginTitle = document.getElementById('login-title');
    const ahora = new Date();
    const hora = ahora.getHours(); // devuelve 0-23 basado en la hora del navegador
    let saludo = "¬°Bienvenido de nuevo!";

    if (hora >= 5 && hora < 12) saludo = "¬°Buenos d√≠as!";
    else if (hora >= 12 && hora < 18) saludo = "¬°Buenas tardes!";
    else saludo = "¬°Buenas noches!";

    loginTitle.textContent = saludo;
</script>

</body>
</html>